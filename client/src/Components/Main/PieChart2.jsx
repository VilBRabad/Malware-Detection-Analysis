import React from 'react';
import { Pie } from 'react-chartjs-2';

const PieChart2 = ({ sizes, labels, totalMalwareMethods }) => {
    // Calculate the number of malware not detected (false negatives)
    
    const detected = sizes[0];
    const notDetected = sizes[1]>0?sizes[1]:Math.abs(sizes[1])
    const percentageDetected = ((detected/(detected+notDetected)) * 100).toFixed(1);
    const percentageNotDetected = ((notDetected / (detected+notDetected)) * 100).toFixed(1);
    // Define data for the pie chart
    const data = {
        labels: labels,
        datasets: [{
            data: [percentageDetected, percentageNotDetected],
            backgroundColor: ['lightcoral', 'lightskyblue'],
        }]
    };
    


    // Options for the pie chart
    const options = {
        title: {
            display: true,
            text: 'Percentage of Malware Detected (including both obfuscated and non-obfuscated)',
        },
        maintainAspectRatio: false,
        legend: {
            position: 'right',
        },
        // Set fixed height
        aspectRatio: 1, // Aspect ratio of 1:1
        responsive: true,
        plugins: {
            legend: {
                position: 'bottom',
            },
            tooltip: {
                callbacks: {
                    label: function (context) {
                        var label = context.label || '';
                        if (label) {
                            label += ': ';
                        }
                        label += parseFloat(context.parsed).toFixed(1) + '%';
                        return label;
                    }
                }
            }
        },
    };

    return (
        <div style={{ height: '400px' }} className="flex flex-col gap-4"> {/* Set a fixed height */}
            <h2>Malware Detection</h2>
            <Pie data={data} options={options} />
            <p>Percentage of Malware Detected: <span className="font-semibold">{percentageDetected}%</span></p>
            <p>Percentage of Malware Not Detected: <span className="font-semibold">{percentageNotDetected}%</span></p>
        </div>
    );
};

export default PieChart2;
